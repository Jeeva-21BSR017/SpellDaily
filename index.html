<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spell Daily</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Pattaya&family=Poppins:wght@400;600;700&family=Ultra&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div class="app-container">

        <!-- Logo -->
        <div class="logo-wrapper">
            <img src="assets/logo.svg" alt="Spell Daily" class="app-logo">
        </div>

        <!-- Summary Section -->
        <div class="section-wrapper summary-wrapper">
            <!-- Header Tape -->
            <div class="section-header-container">
                <img src="assets/overall.svg" alt="Summary" class="section-header-img header-tape-shadow">
            </div>

            <!-- Summary Card Container -->
            <!-- Using SVG as background -->
            <div class="card-container summary-bg">
                <div class="summary-columns">
                    <!-- Column 1 -->
                    <div class="summary-col">
                        <div class="number-large" id="practiced-count">--</div>
                        <img src="assets/words_practiced.svg" alt="Words Practiced" class="summary-img">
                    </div>
                    <!-- Column 2 -->
                    <div class="summary-col">
                        <div class="number-large" id="correct-count">--</div>
                        <img src="assets/words_practicedthis_month.svg" alt="Words Correct" class="summary-img">
                    </div>
                    <!-- Column 3 -->
                    <div class="summary-col">
                        <div class="number-large" id="missed-count">--</div>
                        <img src="assets/words_missedthis_month.svg" alt="Words Missed" class="summary-img">
                    </div>
                </div>
            </div>
        </div>

        <!-- Word Bank Section -->
        <div class="section-wrapper wordbank-wrapper">
            <div class="section-header-container">
                <img src="assets/word_bank.svg" alt="Word Bank" class="section-header-img header-tape-shadow">
            </div>

            <div class="card-container wordbank-bg">
                <div class="word-grid" id="word-grid">
                    <!-- Words injected here -->
                </div>
                <div class="wordbank-line">
                    <!-- Dotted line effect if needed, otherwise just border top -->
                </div>
                <div class="wordbank-footer">
                    Marked in red : incorrect answers on the 1<sup> st</sup> attempt
                </div>
            </div>
        </div>

        <!-- Bottom Row -->
        <div class="bottom-row">

            <!-- Accomplishments -->
            <div class="section-wrapper accomplishments-wrapper">
                <div class="section-header-container">
                    <img src="assets/accomplishments.svg" alt="Accomplishments"
                        class="section-header-img header-tape-shadow">
                </div>
                <!-- Accomplishments Container -->
                <div class="card-container acc-bg">
                    <div class="acc-columns">
                        <!-- Left: Streak -->
                        <div class="acc-col">
                            <div class="streak-visuals">
                                <img src="assets/fire.svg" alt="Fire" class="icon-fire">
                                <div class="streak-number" id="streak-days">--</div>
                            </div>
                            <div class="acc-text">
                                <span id="streak-days-text">--</span> <span id="streak-msg">--</span>
                            </div>
                        </div>

                        <!-- Right: Rank -->
                        <div class="acc-col">
                            <div class="rank-visuals">
                                <span class="rank-top">Top</span>
                                <span class="rank-val" id="rank-val">--</span>
                            </div>
                            <div class="acc-text">
                                <span class="highlight-name" id="user-name-1">--</span> <span
                                    id="percentile-text">--</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Insights (Right) -->
            <div class="insight-wrapper">
                <div class="insight-content">
                    At this learning<br>
                    rate, <span class="badge-name" id="user-name-2">--</span><br>
                    expected to<br>
                    master about <span class="badge-num" id="est-words">--</span><br>
                    new words in the<br>
                    <span id="time-frame">--</span>
                </div>
            </div>

        </div>

        <footer class="app-footer">
            <!-- Using bottomtext_container.svg if available, otherwise just styled pill -->
            <!-- The user didn't mention this specifically but "all space box" implies it. -->
            <!-- I'll stick to CSS pill for footer text as it's cleaner unless SVG is needed. -->
            <div class="footer-content">
                Note for Parents : Even mastered words can be misspelled. Regular practice and celebrating small wins
                help maintain progress!
            </div>
        </footer>

    </div>

    <!-- Load Data Script -->
    <script src="data.js"></script>

    <!-- Main Logic -->
    <script>
        // Render Function
        document.addEventListener('DOMContentLoaded', () => {
            // Use the global appData object loaded from data.js
            const data = appData;

            // Summary
            const practiced = data.summary.practiced;
            const correct = data.summary.correctFirstAttempt;
            const missed = practiced - correct; // Automatically calculate missed

            document.getElementById('practiced-count').textContent = practiced;
            document.getElementById('correct-count').textContent = correct;
            document.getElementById('missed-count').textContent = missed;

            // Word Bank
            const grid = document.getElementById('word-grid');
            data.wordBank.forEach(w => {
                const div = document.createElement('div');
                div.textContent = w.word;
                div.className = w.correct ? 'word-item' : 'word-item incorrect';
                grid.appendChild(div);
            });

            // Accomplishments
            document.getElementById('streak-days').textContent = data.user.streakDays;

            const rankStr = data.user.rankTitle || "Top 25";
            const rankNum = rankStr.replace('Top', '').trim();
            document.getElementById('rank-val').textContent = rankNum;

            document.getElementById('streak-days-text').textContent = data.user.streakDays + " days";
            document.getElementById('streak-msg').textContent = data.user.streakMessage;
            document.getElementById('user-name-1').textContent = data.user.name;
            document.getElementById('percentile-text').textContent = data.user.percentileText;

            // Insights
            const fullName = data.user.name;

            // Update HTML structure dynamically for Insights
            const insightHTML = `
                At this learning<br>
                rate, <span class="badge-name">${fullName}</span><br>
                expected to<br>
                master about <span class="badge-num" id="est-words">${data.user.learningRate.newWordsCount}</span><br>
                new words in the<br>
                <span id="time-frame">${data.user.learningRate.timeFrame}</span>
            `;
            document.querySelector('.insight-content').innerHTML = insightHTML;
        });
    </script>
</body>

</html>